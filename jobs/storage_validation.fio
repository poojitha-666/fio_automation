; ============================================================
;  FIO Job File for Automated Storage Validation
;  Works on Windows (use ioengine=windowsaio) and Linux (libaio)
;  Author: Poojitha (Storage QE)
; ============================================================

[global]
ioengine=windowsaio             ; Async I/O engine (use 'windowsaio' for Windows)
direct=1                     ; Bypass OS cache (real device testing)
time_based=1                 ; Run test for fixed time duration
runtime=30s                  ; Each test will run for 30 seconds
group_reporting=1            ; Combine all job results in a single summary
size=100M                    ; File/device size for testing
numjobs=1                    ; Number of parallel jobs (can be increased)
iodepth=4                    ; Queue depth (number of outstanding I/O requests)
bs=4k                        ; Default block size (can be overridden per job)
;filename=/dev/sdc            ; Target file or block device (e.g., /dev/sdc or testfile)
; Use "filename=testfile" if testing in a directory (file-based test)
; ⚠️ WARNING: Direct device test will overwrite data

; ============================================================
;  TEST 1: SEQUENTIAL WRITE
;  Purpose: Measure maximum write throughput using large blocks
; ============================================================

[seq-write]
rw=write                     ; Sequential write
bs=128k                      ; Block size = 128KB (typical for throughput test)
stonewall                    ; Wait for this test to complete before next starts

; ============================================================
;  TEST 2: SEQUENTIAL READ
;  Purpose: Measure maximum read throughput
; ============================================================

[seq-read]
rw=read                      ; Sequential read
bs=128k                      ; Same 128KB block for read test
stonewall

; ============================================================
;  TEST 3: RANDOM READ
;  Purpose: Evaluate random read IOPS (typical database scenario)
; ============================================================

[rand-read]
rw=randread                  ; Random read access pattern
bs=4k                        ; Small blocks typical for IOPS testing
iodepth=16                   ; Higher queue depth for performance testing
stonewall

; ============================================================
;  TEST 4: RANDOM WRITE
;  Purpose: Evaluate random write IOPS
; ============================================================

[rand-write]
rw=randwrite                 ; Random write pattern
bs=4k
iodepth=16
stonewall

; ============================================================
;  TEST 5: MIXED RANDOM READ/WRITE
;  Purpose: Simulate real-world mixed workload (like DB)
; ============================================================

[randrw-mix]
rw=randrw                    ; Random read/write mix
rwmixread=70                 ; 70% reads, 30% writes
bs=8k                        ; Mixed block size
iodepth=8                    ; Moderate depth
numjobs=2                    ; Two parallel jobs
